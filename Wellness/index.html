<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wellness OS | Professional Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root { --p: #2E8B57; --p-dark: #1e5e3a; --p-light: #e8f5e9; --bg: #f5f7fa; --white: #ffffff; --border: 1px solid #e1e4e8; --shadow: 0 4px 12px rgba(0,0,0,0.03); }
        * { box-sizing: border-box; outline: none; }
        body, html { margin: 0; padding: 0; font-family: 'Noto Sans KR', sans-serif; background: var(--bg); height: 100vh; overflow: hidden; color: #2c3e50; }

        /* [1] ì¸íŠ¸ë¡œ ëª¨ë‹¬ */
        #introModal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(20, 30, 25, 0.92); z-index: 9999; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(10px);
        }
        .modal-card { background: var(--white); padding: 50px; border-radius: 24px; width: 600px; text-align: center; box-shadow: 0 30px 60px rgba(0,0,0,0.4); }
        .mode-btn { 
            width: 100%; padding: 20px; margin: 10px 0; border: 1px solid #eee; border-radius: 14px; 
            background: #fff; font-size: 16px; font-weight: 700; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: space-between; color: #444;
        }
        .mode-btn:hover { background: var(--p); color: #fff; border-color: var(--p); transform: translateY(-2px); box-shadow: 0 5px 15px rgba(46, 139, 87, 0.3); }

        /* [2] ì „ì²´ ë ˆì´ì•„ì›ƒ */
        .layout { display: flex; height: 100vh; transition: 0.8s; filter: blur(20px); opacity: 0; transform: scale(0.98); }
        .layout.active { filter: blur(0); opacity: 1; transform: scale(1); }

        /* Sidebar */
        .sidebar { width: 250px; background: var(--white); padding: 30px 15px; display: flex; flex-direction: column; border-right: var(--border); z-index: 10; }
        .brand { font-size: 22px; font-weight: 900; color: var(--p); margin-bottom: 40px; padding-left: 15px; display: flex; align-items: center; gap: 10px; }
        .nav-item { 
            padding: 15px 20px; border-radius: 12px; color: #777; font-weight: 600; cursor: pointer; transition: 0.2s; margin-bottom: 5px; font-size: 14px; display: flex; align-items: center; gap: 12px;
        }
        .nav-item:hover, .nav-item.active { background: var(--p-light); color: var(--p); }
        
        /* Main Content Stage */
        .center-stage { flex: 1; padding: 0; overflow-y: auto; position: relative; }
        
        /* View Sections (Tab Switching) */
        .view-section { display: none; padding: 30px; grid-template-columns: repeat(2, 1fr); gap: 20px; align-content: start; animation: fadeIn 0.4s ease-out; }
        .view-section.active { display: grid; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Right Panel */
        .right-panel { width: 350px; background: var(--white); border-left: var(--border); padding: 30px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto; }

        /* Common Components */
        .card { background: var(--white); border-radius: 18px; padding: 25px; box-shadow: var(--shadow); border: var(--border); position: relative; overflow: hidden; }
        .full-width { grid-column: span 2; }
        .card-h { font-size: 15px; font-weight: 800; color: #333; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; letter-spacing: -0.5px; }
        .tag { font-size: 11px; font-weight: 700; padding: 4px 8px; border-radius: 6px; background: var(--p-light); color: var(--p); text-transform: uppercase; }

        /* Page 1: Dashboard */
        .solution-text { font-size: 15px; line-height: 1.7; color: #555; background: #fafafa; padding: 20px; border-radius: 12px; border-left: 4px solid var(--p); margin-bottom: 20px; }
        .mind-input { width: 100%; border: 1px solid #eee; border-radius: 10px; padding: 15px; resize: none; font-family: inherit; margin-bottom: 10px; background: #f9f9f9; }
        .burn-btn { width: 100%; background: #e74c3c; color: white; border: none; padding: 12px; border-radius: 10px; cursor: pointer; font-weight: 700; transition: 0.3s; }
        .burn-btn:hover { background: #c0392b; }

        /* Page 2: Therapy Space */
        .space-card { height: 200px; border-radius: 16px; background-size: cover; background-position: center; position: relative; cursor: pointer; transition: 0.3s; overflow: hidden; box-shadow: var(--shadow); }
        .space-card:hover { transform: scale(1.02); }
        .space-overlay { position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px; background: linear-gradient(transparent, rgba(0,0,0,0.8)); color: white; }
        .space-t { font-size: 18px; font-weight: 800; }
        .space-d { font-size: 12px; opacity: 0.8; margin-top: 5px; }

        /* Page 3: Food & Nutrition */
        .food-grid { display: flex; gap: 15px; margin-top: 15px; }
        .food-item { flex: 1; background: #f8f9fa; border-radius: 12px; padding: 15px; text-align: center; border: 1px solid #eee; cursor: pointer; transition: 0.2s; }
        .food-item:hover { border-color: var(--p); background: var(--p-light); }
        .nutrient-chart { margin-top: 20px; background: #fff; padding: 15px; border-radius: 12px; border: 1px solid #eee; }

        /* Page 4: Community */
        .comm-post { padding: 15px; border-bottom: 1px solid #eee; display: flex; gap: 15px; }
        .comm-avatar { width: 40px; height: 40px; background: #ddd; border-radius: 50%; }
        .comm-body { font-size: 13px; color: #555; line-height: 1.5; }

        /* Right Panel Tools */
        .timer-display { font-size: 50px; font-weight: 900; color: var(--p); text-align: center; margin: 15px 0; font-variant-numeric: tabular-nums; }
        .timer-ctrls button { padding: 8px 15px; border: 1px solid #ddd; border-radius: 20px; background: #fff; cursor: pointer; font-size: 13px; margin: 0 5px; }
        .music-list { display: flex; flex-direction: column; gap: 8px; }
        .music-item { padding: 12px; background: #f8f9fa; border-radius: 10px; font-size: 13px; font-weight: 600; cursor: pointer; display: flex; justify-content: space-between; align-items: center; border: 1px solid transparent; }
        .music-item:hover { border-color: var(--p); }
        .music-item.playing { background: var(--p); color: #fff; border-color: var(--p); }

        .hidden { display: none; }
    </style>
</head>
<body>

    <div id="introModal">
        <div class="modal-card">
            <h2 style="color:var(--p); font-size:26px; margin-bottom:10px;">Wellness OS Pro</h2>
            <p style="color:#666; margin-bottom:40px; line-height:1.6; font-size:15px;">
                í˜„ì¬ ì‚¬ìš©ìì˜ ìƒíƒœë¥¼ ì§„ë‹¨í•˜ì—¬<br>ëŒ€ì‹œë³´ë“œ, ê³µê°„, ì‹ë‹¨, ì‚¬ìš´ë“œë¥¼ ëª¨ë‘ ì¬êµ¬ì„±í•©ë‹ˆë‹¤.
            </p>
            <button class="mode-btn" onclick="startOS('focus')">
                <span><i class="fa-solid fa-brain" style="color:#e67e22; margin-right:10px;"></i> ì§‘ì¤‘ë ¥ ì €í•˜ / ë¸Œë ˆì¸ í¬ê·¸</span>
                <i class="fa-solid fa-arrow-right"></i>
            </button>
            <button class="mode-btn" onclick="startOS('stress')">
                <span><i class="fa-solid fa-heart-crack" style="color:#e74c3c; margin-right:10px;"></i> ê¸‰ì„± ìŠ¤íŠ¸ë ˆìŠ¤ / ë¶ˆì•ˆ</span>
                <i class="fa-solid fa-arrow-right"></i>
            </button>
            <button class="mode-btn" onclick="startOS('fatigue')">
                <span><i class="fa-solid fa-battery-quarter" style="color:#3498db; margin-right:10px;"></i> ì‹ ì²´ ì—ë„ˆì§€ ë°©ì „ / í”¼ë¡œ</span>
                <i class="fa-solid fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <div class="layout" id="mainLayout">
        
        <nav class="sidebar">
            <div class="brand"><i class="fa-solid fa-circle-nodes"></i> BIO-OS</div>
            <div class="nav-item active" onclick="switchView('dashboard', this)"><i class="fa-solid fa-chart-pie"></i> ëŒ€ì‹œë³´ë“œ í™ˆ</div>
            <div class="nav-item" onclick="switchView('spaces', this)"><i class="fa-solid fa-vr-cardboard"></i> í…Œë¼í”¼ ê³µê°„</div>
            <div class="nav-item" onclick="switchView('food', this)"><i class="fa-solid fa-carrot"></i> ì˜ì–‘ ì†”ë£¨ì…˜</div>
            <div class="nav-item" onclick="switchView('community', this)"><i class="fa-solid fa-users-rays"></i> ì»¤ë®¤ë‹ˆí‹°</div>
            
            <div style="margin-top:auto; background:#f0f2f5; padding:20px; border-radius:15px;">
                <div style="font-size:12px; color:#888; margin-bottom:5px;">Today's Condition</div>
                <div id="sideStatus" style="font-size:18px; font-weight:800; color:var(--p);">Analyzing...</div>
            </div>
        </nav>

        <main class="center-stage">
            
            <section id="dashboard" class="view-section active">
                <div class="card full-width">
                    <div class="card-h">
                        <span><i class="fa-solid fa-microscope"></i> AI ì •ë°€ í–‰ë™ ì²˜ë°© (Science-based Solution)</span>
                        <span class="tag">AI Generated</span>
                    </div>
                    <div id="dash-solution" class="solution-text">ë¡œë”© ì¤‘...</div>
                </div>

                <div class="card">
                    <div class="card-h"><i class="fa-solid fa-fire"></i> ê°ì • ì†Œê°ì¥ (Mind Cleaner)</div>
                    <textarea id="mindText" class="mind-input" rows="4" placeholder="ì§€ê¸ˆ ë¨¸ë¦¿ì†ì„ ì–´ì§€ëŸ½íˆëŠ” ìƒê°ë“¤ì„ ì ì–´ì£¼ì„¸ìš”. ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë””ì§€í„¸ ë°©ì‹ìœ¼ë¡œ ì˜ì›íˆ ì†Œê°ë©ë‹ˆë‹¤."></textarea>
                    <button class="burn-btn" onclick="burnMind()"><i class="fa-solid fa-trash"></i> ìƒê° íƒœì›Œë²„ë¦¬ê¸°</button>
                </div>

                <div class="card">
                    <div class="card-h">ë°”ì´ì˜¤ë¦¬ë“¬ ì‹œê°í™”</div>
                    <div style="height:180px;"><canvas id="bioChart"></canvas></div>
                </div>

                <div class="card full-width">
                    <div class="card-h">ì¦‰ê° ì‹¤í–‰ í”„ë¡œí† ì½œ (Action Plan)</div>
                    <div id="dash-actions" style="display:grid; grid-template-columns:1fr 1fr; gap:10px;"></div>
                </div>
            </section>

            <section id="spaces" class="view-section">
                <div class="card full-width" style="background:none; border:none; box-shadow:none; padding:0;">
                    <div style="font-size:20px; font-weight:800; margin-bottom:20px;">ëª°ì…í˜• ê°€ìƒ í™˜ê²½ (Virtual Environment)</div>
                </div>
                <div class="space-card" style="background-image: url('https://images.unsplash.com/photo-1511497584788-876760111969?w=800');" onclick="alert('ê°€ìƒ ìˆ² ê³µê°„ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤. (VR ëª¨ë“œ ì¤€ë¹„ì¤‘)')">
                    <div class="space-overlay">
                        <div class="space-t">Deep Forest</div>
                        <div class="space-d">í”¼í†¤ì¹˜ë“œ ì‹œê°í™” ë° 432Hz ìƒˆì†Œë¦¬</div>
                    </div>
                </div>
                <div class="space-card" style="background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800');" onclick="alert('í•´ë³€ ê³µê°„ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.')">
                    <div class="space-overlay">
                        <div class="space-t">Sunset Beach</div>
                        <div class="space-d">ì•ŒíŒŒíŒŒ ìœ ë„ íŒŒë„ ì†Œë¦¬</div>
                    </div>
                </div>
                <div class="space-card" style="background-image: url('https://images.unsplash.com/photo-1497366216548-37526070297c?w=800');" onclick="alert('ì§‘ì¤‘ ì„œì¬ë¡œ ì´ë™í•©ë‹ˆë‹¤.')">
                    <div class="space-overlay">
                        <div class="space-t">Focus Library</div>
                        <div class="space-d">ë°±ìƒ‰ì†ŒìŒ ë° ì°¨ë¶„í•œ ì¡°ëª…</div>
                    </div>
                </div>
                <div class="space-card" style="background-image: url('https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?w=800');" onclick="alert('ëª…ìƒ ë£¸ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.')">
                    <div class="space-overlay">
                        <div class="space-t">Zen Garden</div>
                        <div class="space-d">ì™„ë²½í•œ ê³ ìš”ì™€ ëª…ìƒ ê°€ì´ë“œ</div>
                    </div>
                </div>
            </section>

            <section id="food" class="view-section">
                <div class="card full-width">
                    <div class="card-h">ë§ì¶¤í˜• ì˜ì–‘ ê³µê¸‰ ì „ëµ</div>
                    <div id="food-desc" style="color:#666; margin-bottom:20px;"></div>
                    <div class="card-h" style="font-size:13px; color:#888;">ì¶”ì²œ ì‹ì¬ë£Œ</div>
                    <div id="food-list" class="food-grid"></div>
                </div>
                <div class="card full-width">
                    <div class="card-h">ì˜ì–‘ ì„±ë¶„ ë¶„ì„í‘œ</div>
                    <div style="display:flex; justify-content:space-around; text-align:center; padding:20px 0;">
                        <div><div style="font-size:24px; font-weight:900; color:var(--p);">45%</div><div style="font-size:12px;">ë³µí•© íƒ„ìˆ˜í™”ë¬¼</div></div>
                        <div><div style="font-size:24px; font-weight:900; color:#e67e22;">30%</div><div style="font-size:12px;">ë‹¨ë°±ì§ˆ</div></div>
                        <div><div style="font-size:24px; font-weight:900; color:#3498db;">25%</div><div style="font-size:12px;">ê±´ê°•í•œ ì§€ë°©</div></div>
                    </div>
                </div>
            </section>

            <section id="community" class="view-section">
                <div class="card full-width">
                    <div class="card-h">ìµëª… ì¸ì‚¬ì´íŠ¸ í”¼ë“œ (Insight Feed)</div>
                    <div class="comm-post">
                        <div class="comm-avatar" style="background:#ff9f43;"></div>
                        <div class="comm-body">
                            <strong>User_2910</strong><br>
                            ìŠ¤íŠ¸ë ˆìŠ¤ ëª¨ë“œì—ì„œ ì¶”ì²œí•´ì¤€ '4-7-8 í˜¸í¡ë²•' ì§„ì§œ íš¨ê³¼ ìˆë„¤ìš”. ìŠ¤ë§ˆíŠ¸ ì›Œì¹˜ ì‹¬ë°•ìˆ˜ê°€ 90ì—ì„œ 72ë¡œ ë–¨ì–´ì§.
                        </div>
                    </div>
                    <div class="comm-post">
                        <div class="comm-avatar" style="background:#54a0ff;"></div>
                        <div class="comm-body">
                            <strong>MindWalker</strong><br>
                            ì§‘ì¤‘ë ¥ ì €í•˜ì¼ ë•Œ ê²¬ê³¼ë¥˜ ë¨¹ìœ¼ë¼ëŠ” íŒ ë³´ê³  ë°”ë¡œ í¸ì˜ì  ë‹¤ë…€ì™”ìŠµë‹ˆë‹¤. í™•ì‹¤íˆ ë¨¸ë¦¬ê°€ ë§‘ì•„ì§€ëŠ” ê¸°ë¶„ì…ë‹ˆë‹¤.
                        </div>
                    </div>
                </div>
            </section>

        </main>

        <aside class="right-panel">
            <div class="card">
                <div class="card-h"><i class="fa-solid fa-stopwatch"></i> í¬ëª¨ë„ë¡œ íƒ€ì´ë¨¸</div>
                <div class="timer-display" id="timer">25:00</div>
                <div class="timer-ctrls" style="text-align:center;">
                    <button onclick="runTimer()"><i class="fa-solid fa-play"></i> Start</button>
                    <button onclick="stopTimer()"><i class="fa-solid fa-pause"></i> Pause</button>
                    <button onclick="resetTimer()"><i class="fa-solid fa-rotate-left"></i> Reset</button>
                </div>
            </div>

            <div class="card">
                <div class="card-h"><i class="fa-solid fa-music"></i> íë§ ì‚¬ìš´ë“œ</div>
                <div class="music-list">
                    <div class="music-item" onclick="playMusic(0, this)">
                        <span><i class="fa-solid fa-play"></i> Erik Satie - GymnopÃ©dies</span>
                    </div>
                    <div class="music-item" onclick="playMusic(1, this)">
                        <span><i class="fa-solid fa-play"></i> Debussy - Clair de Lune</span>
                    </div>
                    <div class="music-item" onclick="playMusic(2, this)">
                        <span><i class="fa-solid fa-play"></i> Yiruma - River Flows</span>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-h">2026.02 Tracker</div>
                <div style="display:grid; grid-template-columns:repeat(7, 1fr); gap:4px; text-align:center; font-size:11px; color:#aaa;">
                    <div id="mini-cal" style="display:contents;"></div>
                </div>
            </div>
        </aside>

    </div>
    
    <audio id="audioPlayer" loop></audio>

    <script>
        // [Data] í†µí•© ìƒíƒœ ë°ì´í„°ë² ì´ìŠ¤
        const db = {
            focus: {
                label: "FOCUS MODE",
                sol: "í˜„ì¬ ë‡ŒíŒŒ ë¶„ì„ ê²°ê³¼, ì „ë‘ì—½ì˜ ë² íƒ€íŒŒ í™œì„±ë„ê°€ ì €í•˜ë˜ì–´ ì •ë³´ ì²˜ë¦¬ ë³‘ëª© í˜„ìƒì´ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤. <br><br>ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„  ë‹¨ìˆœ íœ´ì‹ì´ ì•„ë‹Œ <strong>'ì ê·¹ì  ì‹œê° ì°¨ë‹¨'</strong>ê³¼ <strong>'í˜ˆë‹¹ ìŠ¤íŒŒì´í¬ ì—†ëŠ” ì—ë„ˆì§€ ê³µê¸‰'</strong>ì´ í•µì‹¬ì…ë‹ˆë‹¤. ì¹´í˜ì¸ì€ ì˜¤íˆë ¤ ë‡Œì˜ í”¼ë¡œë„ë¥¼ ë†’ì¼ ìˆ˜ ìˆìœ¼ë‹ˆ, ì•„ë˜ì˜ í–‰ë™ í”„ë¡œí† ì½œì„ ë”°ë¥´ì‹­ì‹œì˜¤.",
                acts: ["ìŠ¤ë§ˆíŠ¸í° í‘ë°± ëª¨ë“œ ì „í™˜", "ì°½ë¬¸ ì—´ì–´ í™˜ê¸° (CO2 ë°°ì¶œ)", "ê²¬ê³¼ë¥˜/ë‹¤í¬ì´ˆì½œë¦¿ ì„­ì·¨", "20ë¶„ ì§‘ì¤‘ í›„ 5ë¶„ ë¨¼ ê³³ ì‘ì‹œ"],
                foodDesc: "ë‡Œì˜ ì¸ì§€ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ” ë‰´ëŸ°ì˜ ì‹ í˜¸ ì „ë‹¬ì„ ë•ëŠ” 'ì˜¤ë©”ê°€-3'ì™€ 'í•­ì‚°í™” ë¬¼ì§ˆ'ì´ í’ë¶€í•œ ì‹ë‹¨ì´ í•„ìš”í•©ë‹ˆë‹¤.",
                foods: ["í˜¸ë‘ & ì•„ëª¬ë“œ", "ë¸”ë£¨ë² ë¦¬", "ì—°ì–´ ìƒëŸ¬ë“œ", "ë…¹ì°¨ (í…Œì•„ë‹Œ)"]
            },
            stress: {
                label: "CALM MODE",
                sol: "ììœ¨ì‹ ê²½ê³„ ë¶„ì„ ê²°ê³¼, êµê° ì‹ ê²½ì´ ê³¼ë„í•˜ê²Œ í•­ì§„ë˜ì–´ 'íˆ¬ìŸ-ë„í”¼' ë°˜ì‘ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤. <br><br>ê°€ì¥ ì‹œê¸‰í•œ ê²ƒì€ <strong>'ë¯¸ì£¼ì‹ ê²½ ìê·¹'</strong>ì…ë‹ˆë‹¤. ì‹¬í˜¸í¡ì„ í†µí•´ íš¡ê²©ë§‰ì„ ì›€ì§ì—¬ ë¶€êµê° ì‹ ê²½ì„ ê°•ì œ í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤. ì§€ê¸ˆì˜ ë¶ˆì•ˆì€ ì‹¬ë¦¬ì  ë¬¸ì œê°€ ì•„ë‹Œ ìƒë¦¬ì  í˜„ìƒì„ì„ ì¸ì§€í•˜ì‹­ì‹œì˜¤.",
                acts: ["4-7-8 í˜¸í¡ë²• 3íšŒ ì‹¤ì‹œ", "ë”°ëœ»í•œ ë¬¼ í•œ ì” ë§ˆì‹œê¸°", "ì–´ê¹¨/ìŠ¹ëª¨ê·¼ ë§ˆì‚¬ì§€", "ì¢‹ì•„í•˜ëŠ” í–¥ê¸°(ë¼ë²¤ë” ë“±) ë§¡ê¸°"],
                foodDesc: "ìŠ¤íŠ¸ë ˆìŠ¤ í˜¸ë¥´ëª¬ì¸ ì½”ë¥´í‹°ì†” ìˆ˜ì¹˜ë¥¼ ë‚®ì¶”ê³ , í–‰ë³µ í˜¸ë¥´ëª¬ì¸ ì„¸ë¡œí† ë‹Œ ìƒì„±ì„ ë•ëŠ” 'íŠ¸ë¦½í† íŒ' ìœ„ì£¼ì˜ ì‹ë‹¨ì…ë‹ˆë‹¤.",
                foods: ["ë°”ë‚˜ë‚˜", "ë”°ëœ»í•œ ìš°ìœ ", "í†µê³¡ë¬¼ ë¹µ", "í—ˆë¸Œí‹°"]
            },
            fatigue: {
                label: "RECOVERY MODE",
                sol: "ì„¸í¬ ë‚´ ATP ìƒì„± íš¨ìœ¨ì´ ì €í•˜ë˜ê³  ì –ì‚°ì´ ì¶•ì ëœ ì „í˜•ì ì¸ 'ì—ë„ˆì§€ ê³ ê°ˆ' ìƒíƒœì…ë‹ˆë‹¤. <br><br>ë¬´ë¦¬í•œ í™œë™ì€ í™œì„±ì‚°ì†Œë¥¼ ì¦ê°€ì‹œì¼œ ë…¸í™”ë¥¼ ì´‰ì§„í•©ë‹ˆë‹¤. ì§€ê¸ˆì€ <strong>'ìˆ˜ë™ì  íœ´ì‹'</strong>ë³´ë‹¤ëŠ” ë¦¼í”„ ìˆœí™˜ì„ ë•ëŠ” <strong>'ê°€ë²¼ìš´ ìŠ¤íŠ¸ë ˆì¹­'</strong>ê³¼ <strong>'ì§ˆ ì¢‹ì€ ìˆ˜ë©´'</strong>ì„ ìœ„í•œ ì¤€ë¹„ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
                acts: ["30ë¶„ íŒŒì›Œ ë‚®ì (Power Nap)", "ë‹¤ë¦¬ ì‹¬ì¥ë³´ë‹¤ ë†’ê²Œ ì˜¬ë¦¬ê¸°", "ë¯¸ì˜¨ìˆ˜ ìƒ¤ì›Œ", "ìŠ¤ë§ˆíŠ¸í° ë¸”ë£¨ë¼ì´íŠ¸ ì°¨ë‹¨"],
                foodDesc: "ì†Œí™” ì—ë„ˆì§€ë¥¼ ìµœì†Œí™”í•˜ê³ , ê·¼ìœ¡ íšŒë³µê³¼ ì—ë„ˆì§€ ì¬ì¶©ì „ì„ ë•ëŠ” 'ê³ ë‹¨ë°±' ë° 'ë¹„íƒ€ë¯¼ Bêµ°' ì‹ë‹¨ì…ë‹ˆë‹¤.",
                foods: ["ë‹­ê°€ìŠ´ì‚´ ì£½", "ë‘ë¶€ ìš”ë¦¬", "ë‹¬ê±€ ì°œ", "ë¹„íƒ€ë¯¼ ìŒë£Œ"]
            }
        };

        const tracks = [
            "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3",
            "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-8.mp3", 
            "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-12.mp3"
        ];

        let currentMode = 'focus';
        let timerInt = null;
        let timeLeft = 1500;

        // [Logic 1] ì‹œìŠ¤í…œ ë¶€íŒ… ë° ë°ì´í„° ë°”ì¸ë”©
        function startOS(mode) {
            currentMode = mode;
            const data = db[mode];

            // UI ì „í™˜
            document.getElementById('introModal').style.display = 'none';
            document.getElementById('mainLayout').classList.add('active');
            
            // ë°ì´í„° ë¿Œë¦¬ê¸° (ëŒ€ì‹œë³´ë“œ)
            document.getElementById('sideStatus').innerText = data.label;
            document.getElementById('dash-solution').innerHTML = data.sol;
            document.getElementById('dash-actions').innerHTML = data.acts.map(a => 
                `<div style="background:#f8f9fa; padding:12px; border-radius:10px; font-size:13px; display:flex; align-items:center; gap:8px; border:1px solid #eee;">
                    <i class="fa-solid fa-check" style="color:var(--p)"></i> ${a}
                </div>`
            ).join('');

            // ë°ì´í„° ë¿Œë¦¬ê¸° (ì‹ë‹¨)
            document.getElementById('food-desc').innerText = data.foodDesc;
            document.getElementById('food-list').innerHTML = data.foods.map(f => 
                `<div class="food-item">
                    <div style="font-size:24px; margin-bottom:5px;">ğŸ½ï¸</div>
                    <div style="font-weight:700; font-size:14px;">${f}</div>
                </div>`
            ).join('');

            initChart();
            initCalendar();
        }

        // [Logic 2] íƒ­ ì „í™˜ (ë·° ìŠ¤ìœ„ì¹­)
        function switchView(viewId, el) {
            // 1. ì‚¬ì´ë“œë°” í™œì„± í´ë˜ìŠ¤ ë³€ê²½
            document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
            el.classList.add('active');

            // 2. ë©”ì¸ ì„¹ì…˜ ìˆ¨ê¸°ê¸°/ë³´ì´ê¸°
            document.querySelectorAll('.view-section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(viewId).classList.add('active');
        }

        // [Logic 3] ê°ì • ì†Œê°ì¥
        function burnMind() {
            const area = document.getElementById('mindText');
            if(area.value.trim() === "") return alert("ë¨¼ì € ì†Œê°í•  ìƒê°ë“¤ì„ ì ì–´ì£¼ì„¸ìš”.");
            
            if(confirm("ì •ë§ ì´ ìƒê°ë“¤ì„ ë””ì§€í„¸ ê³µê°„ì—ì„œ ì™„ì „íˆ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
                area.style.transition = "all 1.5s ease";
                area.style.background = "#2c3e50";
                area.style.color = "#2c3e50"; // ê¸€ìë„ ë°°ê²½ìƒ‰ê³¼ ê°™ê²Œ ë§Œë“¤ì–´ ì•ˆ ë³´ì´ê²Œ
                area.style.transform = "scale(0.95)";
                
                setTimeout(() => {
                    alert("ì„±ê³µì ìœ¼ë¡œ ì†Œê°ë˜ì—ˆìŠµë‹ˆë‹¤. ë¨¸ë¦¿ì†ì´ í•œê²° ê°€ë²¼ì›Œì§€ì…¨ê¸¸ ë°”ëë‹ˆë‹¤.");
                    area.value = "";
                    area.style = ""; // ìŠ¤íƒ€ì¼ ì´ˆê¸°í™”
                }, 1600);
            }
        }

        // [Logic 4] íƒ€ì´ë¨¸ & ìŒì•… & ì°¨íŠ¸
        function runTimer() {
            if(timerInt) return;
            timerInt = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                if(timeLeft <= 0) { clearInterval(timerInt); alert("ì„¸ì…˜ ì¢…ë£Œ!"); }
            }, 1000);
        }
        function stopTimer() { clearInterval(timerInt); timerInt = null; }
        function resetTimer() { stopTimer(); timeLeft = 1500; updateTimerDisplay(); }
        function updateTimerDisplay() {
            const m = String(Math.floor(timeLeft / 60)).padStart(2,'0');
            const s = String(timeLeft % 60).padStart(2,'0');
            document.getElementById('timer').innerText = `${m}:${s}`;
        }

        function playMusic(idx, el) {
            const player = document.getElementById('audioPlayer');
            document.querySelectorAll('.music-item').forEach(i => i.classList.remove('playing'));
            
            if(player.src === tracks[idx] && !player.paused) {
                player.pause();
            } else {
                el.classList.add('playing');
                player.src = tracks[idx];
                player.play();
            }
        }

        function initChart() {
            new Chart(document.getElementById('bioChart'), {
                type: 'line',
                data: {
                    labels: ['Now', '+2h', '+4h', '+6h', '+8h', '+10h'],
                    datasets: [{
                        label: 'Energy Prediction',
                        data: [30, 45, 60, 55, 70, 80],
                        borderColor: '#2E8B57',
                        backgroundColor: 'rgba(46, 139, 87, 0.1)',
                        fill: true, tension: 0.4
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
            });
        }

        function initCalendar() {
            const cal = document.getElementById('mini-cal');
            for(let i=0; i<28; i++) {
                const d = document.createElement('div');
                d.style.padding = "4px";
                d.style.borderRadius = "4px";
                d.style.background = Math.random() > 0.7 ? "var(--p)" : "#eee"; // ëœë¤ìœ¼ë¡œ ì‹¤ì²œ ê¸°ë¡ í‘œì‹œ
                d.innerText = i+1;
                if(d.style.background !== "rgb(238, 238, 238)") d.style.color = "#fff";
                cal.appendChild(d);
            }
        }
    </script>
</body>
</html>